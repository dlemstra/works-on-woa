---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/Common/BaseHead.astro";
import Header from "../components/Common/Header.astro";
import Pagination from "../components/Pagination/Pagination.astro";
import Footer from "../components/Common/Footer.astro";
import Search from "../components/Search/Search.astro";
import ProjectListing from "../components/Projects/ProjectListing.astro";

const { category, page } = Astro.props;
type Project = CollectionEntry<"projects">;
---

<html lang="en">
  <head>
    <BaseHead
      title={"Windows on ARM"}
      description={"Find projects supported by Windows on ARM"}
    />
  </head>
  <body>
    <Header />
    <main>
      <section class="flex flex-col items-center">
        <h2 class="font-bold p-5 text-xl">Category: {category}</h2>
        <Pagination
          length={page.lastPage}
          baseUrl={`/${category}`}
          currentUrl={page.url.current}
          currentPage={page.currentPage}
          prevUrl={page.url.prev}
          nextUrl={page.url.next}
          lastUrl={`/${category}/${page.lastPage}`}
        />
        <ul class="p-4 flex flex-row flex-wrap w-full">
          {page.data.map((project: Project) => <ProjectListing {...project} />)}
        </ul>
      </section>
      <Search />
    </main>
    <Footer />
  </body>
</html>
