---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/Common/BaseHead.astro";
import Header from "../components/Common/Header.astro";
import Pagination from "../components/Pagination/Pagination.astro";
import Footer from "../components/Common/Footer.astro";
import Search from "../components/Search/Search.astro";
import ProjectListing from "../components/Projects/ProjectListing.astro";
import CategoryList from "../components/Categories/CategoryList.astro";

const { categoryData, page, slug } = Astro.props;
type Project = CollectionEntry<"projects">;
---

<html lang="en">
  <head>
    <BaseHead
      title={"Windows on ARM"}
      description={"Find projects supported by Windows on ARM"}
    />
  </head>
  <body>
    <Header />
    <main class="container mx-auto">
      <section class="flex flex-col items-center p-1 sm:pb-10 md:px-20 pt-0">
        <h2 class="font-bold p-5 text-xl">
          Category: {slug === "all" ? "All" : categoryData.name}
        </h2>
        <ul class="flex flex-row flex-wrap w-full">
          {page.data.map((project: Project) => <ProjectListing {...project} />)}
        </ul>
        <Pagination
          length={page.lastPage}
          baseUrl={`/${slug}`}
          currentUrl={page.url.current}
          currentPage={page.currentPage}
          prevUrl={page.url.prev}
          nextUrl={page.url.next}
          lastUrl={`/${slug}/${page.lastPage}`}
        />
      </section>

      <Search />
      <CategoryList />
    </main>

    <Footer />
  </body>
</html>
